{
	"info": {
		"_postman_id": "XX",
		"name": "Check printer's new driver version",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "XX"
	},
	"item": [
		{
			"name": "Return serial number",
			"request": {
				"auth": {
					"type": "noauth"
				},
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{ip}}}}/serialnumber",
					"host": [
						"10",
						"140",
						"140",
						"178"
					],
					"port": "3030",
					"path": [
						"serialnumber"
					]
				}
			},
			"response": []
		},
		{
			"name": "Coldstorage Copy",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"let response = pm.response.json();\r",
							"//console.log(response[0].new);\r",
							"pm.globals.set(\"newfile\",response[0].new);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "mixed",
						"value": "true",
						"disabled": true
					},
					{
						"key": "Store",
						"value": "{{store}}"
					},
					{
						"key": "Authorization",
						"value": "{{auth}}"
					},
					{
						"warning": "This is a duplicate header and will be overridden by the Content-Type header generated by Postman.",
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "formdata",
					"formdata": [
						{
							"key": "",
							"type": "file",
							"src": "/C:/Users/marcin.jakubow/Documents/ia2CSLV7J7.jpg"
						}
					]
				},
				"url": {
					"raw": "https://{{env}}.{{CPH_url}}/coldstorage/store",
					"protocol": "https",
					"host": [
						"{{env}}",
						"product",
						{{subproduct}}
					],
					"path": [
						"coldstorage",
						"store"
					]
				}
			},
			"response": []
		},
		{
			"name": "POST order",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"pm.collectionVariables.set(\"newe\", pm.globals.get(\"newfile\"));\r",
							""
						],
						"type": "text/javascript"
					}
				},
				{
					"listen": "test",
					"script": {
						"exec": [
							"let response = pm.response.json();\r",
							"console.log(response.id);\r",
							"pm.environment.get(\"new\");\r",
							"pm.globals.set(\"ID\",response.id);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "mixed",
						"value": "true"
					},
					{
						"key": "Store",
						"value": "{{store}}"
					},
					{
						"key": "Authorization",
						"value": "{{auth}}"
					},
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n\r\n    \"cart\": [\r\n        {\r\n            \"sourceList\": [\r\n                {\r\n                    \"filename\": \"{{newfile}}\"\r\n                }\r\n            ],\r\n            \"rendered\": true,\r\n            \"products\": [\r\n                {\r\n                    \"quantity\": 1,\r\n                    \"id\": \"H1ZCYMEWZQ\",\r\n                    \"formats\": [\r\n                        {\r\n                            \"id\": \"10x15\"\r\n                        }\r\n                    ],\r\n                    \"type\": \"photo\",\r\n                    \"layout\": {\r\n                        \"id\": \"BJUb6tzVWWm\",\r\n                        \"rotate\": true\r\n                    },\r\n                    \"renderFinished\": false,\r\n                    \"printed\": 0\r\n                }\r\n            ]\r\n        },\r\n        {\r\n            \"sourceList\": [\r\n                {\r\n                    \"filename\": \"{{newfile}}\"\r\n                }\r\n            ],\r\n            \"rendered\": true,\r\n            \"products\": [\r\n                {\r\n                    \"quantity\": 1,\r\n                    \"id\": \"H1ZCYMEWZQ\",\r\n                    \"formats\": [\r\n                        {\r\n                            \"id\": \"10x15\"\r\n                        }\r\n                    ],\r\n                    \"type\": \"photo\",\r\n                    \"layout\": {\r\n                        \"id\": \"BJUb6tzVWWm\",\r\n                        \"rotate\": true\r\n                    },\r\n                    \"renderFinished\": false,\r\n                    \"printed\": 0\r\n                }\r\n            ]\r\n        }\r\n\r\n    \r\n\r\n    ],\r\n\r\n    \r\n    \r\n    \"topkek\": \"iOS\",\r\n    \"isValid\": true\r\n}"
				},
				"url": {
					"raw": "https://{{env}}.{{CPH_url}}/ordermanager/order/",
					"protocol": "https",
					"host": [
						"{{env}}",
						"product",
						{{subproduct}}
					],
					"path": [
						"ordermanager",
						"order",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "Order print",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "10.140.140.178:3030/print/{{ID}}",
					"host": [
						"10",
						"140",
						"140",
						"178"
					],
					"port": "3030",
					"path": [
						"print",
						"{{ID}}"
					]
				}
			},
			"response": []
		}
	],
	"variable": [
		{
			"key": "newe",
			"value": ""
		}
	]
}
